import React,{ useState,useEffect} from 'react';
import { useLocation} from 'react-router-dom';

import ComponentCard from '../../../components/ComponentCard';

const Customer = () => { 
  const location = useLocation();
  const dataL = location.state || {};
  // const navigate = useNavigate();
  // const [data, setData] = useState(dataL);
  const [data, setData] = useState(
    [{Customer:"A N Furnishings",TotalOrders:"1-> List view",TotalPendingOrders:"0->Pending Orders", PendingOrders:"0->To Be Dispatched",TotalQuantity: "0.00",TotalPlanned:"0.00 m",TotalManufactured:"0.00 m",TotalDispatched:"0.00 m",TotalActualPending:"0.00 m"}]
  );

  const tableStyle = {

  };


 console.log('data',data);

  // const handleDeleteClick = async (itemId) => {
  //   try {
  //     // Call your API endpoint to delete the item
  //     const response = await fetch(`your-api-endpoint/${itemId}`, {
  //       method: 'DELETE',
  //       headers: {
  //         // Your headers here (if needed)
  //       }
  //     });
  
  //     // Check if the request was successful
  //     if (!response.ok) {
  //       throw new Error(`Error: ${response.statusText}`);
  //     }
  
  //     // Filter out the deleted item from your data state
  //     const updatedData = data.filter((item) => item.id !== itemId);
  //     setData(updatedData);
  
  //     console.log('Item deleted successfully');
  //   } catch (error) {
  //     //only checks for error that are generated by fetch function , and cors 
  //     console.error('Failed to delete the item', error);
  //   }
  // };
  

  useEffect(() => {
    
    // Fetch the data from the API
    const fetchData = async () => {
      const token = localStorage.getItem('userToken');
      console.log('token',token);
      const response = await fetch(`https://indiapuleather.com/teamasia/api/public/order/${dataL.id}`, {
        method: 'GET', 
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      console.log('result',response);
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      const result = await response.json();
      setData(result); 
    };
  
    fetchData();
  }, []);

  return (
    <ComponentCard
    title=""
    subtitle={
      <p>
        {/* Overview of the projects */}
      </p>
    }
  >
    
    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>
  

      <table className="table" style={tableStyle}>
              <thead>
                <tr>
                  <th scope="col">Company Name</th>
                  <th scope="col">Actions </th>
                </tr>
              </thead>
              <tbody>
                {data.map((customer) => (
                  <>
                    <tr><td>Customer Name</td><td>{customer.Customer}</td></tr>
                    <tr><td>TotalOrders</td><td>{customer.TotalOrders}</td></tr>
                    <tr><td>Total Pending Orders</td><td>{customer.TotalPendingOrders}</td></tr>
                    <tr><td>Pending Orders (Dispatched View)</td><td>{customer.PendingOrders}</td></tr>
                    <tr><td>Total Quantity</td><td>{customer.TotalQuantity}</td></tr>
                    <tr><td>Total Planned</td><td>{customer.TotalPlanned}</td></tr>
                    <tr><td>Total Manufactured</td><td>{customer.TotalManufactured}</td></tr>
                    <tr><td>Total Dispatched</td><td>{customer.TotalDispatched}</td></tr>
                    <tr><td>Total Actual Pending</td><td>{customer.TotalActualPending}</td></tr>
                  </>
                ))}
                                
              </tbody>
            </table>
    </div>
   
  </ComponentCard>

   
   
  );
};

export default Customer;